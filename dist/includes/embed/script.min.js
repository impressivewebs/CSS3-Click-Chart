function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function loadJSON(e,t,n){var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?t&&t(JSON.parse(s.responseText)):n&&n(s))},s.open("GET",e,!0),s.send()}var caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",featureID=(featureID=location.href.split("?feat=")[1])?featureID.split("&periods=")[0]:null,periods=(periods=location.href.split("&periods=")[1])?periods.split(","):null,browsers=["ie","edge","firefox","chrome","safari","opera"];document.getElementById("ciuFooter").href="http://caniuse.com#feat="+document.location.toString().split("?feat=")[1].split("&")[0],document.getElementById("defaultMessage").innerHTML=featureID&&periods?'<a href="http://caniuse.com/#feat='+featureID+'">Can I Use '+featureID+"?</a> Data on support for the "+featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature and/or Periods not Specified";for(var i=periods.length-1;i>-1;i--){var tableCells='<td class="ie"></td><td class="edge"></td><td class="firefox"></td><td class="chrome"></td><td class="safari"></td><td class="opera"></td>',row=document.createElement("tr");row.className="statistics "+periods[i],row.innerHTML=tableCells,document.getElementById("tableBody").appendChild(row)}loadJSON(caniuseDataUrl,function(e){var t=e.data[featureID];if(t){var s=t.usage_perc_y,r=t.usage_perc_a,a=(a=s+r).toFixed(2),o=t.description;o=(o=o.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureDescription").innerHTML=o,document.getElementById("featureLink").href="http://caniuse.com/#feat="+featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+s+'%</span> + <span class="a">'+r+"%</span> = "+a+"%";for(var i={},l=0;l<browsers.length;l++){for(var d,u=browsers[l],c=e.agents[u].current_version,f=0;f<e.agents[u].version_list.length;f++)if(0===e.agents[u].version_list[f].era){d=f;break}d=parseInt(d),i[u]={};for(f=0;f<periods.length;f++)"current"===(g=periods[f])?i[u][g]=c:g.indexOf("past")>-1?(n=parseInt(g.split("_")[1]),i[u][g]=e.agents[u].version_list[d-n]?e.agents[u].version_list[d-n].version:null):g.indexOf("future")>-1&&(n=parseInt(g.split("_")[1]),i[u][g]=e.agents[u].version_list[d+n]?e.agents[u].version_list[d+n].version:null)}for(var p={},l=0;l<browsers.length;l++){p[u=browsers[l]]={};for(f=0;f<periods.length;f++){var g=periods[f],m=i[u][g],h=(h=e.agents[u].usage_global[m])?h.toFixed(2):0;p[u][g]=h}}for(var y={},l=0;l<browsers.length;l++){y[u=browsers[l]]={};for(f=0;f<periods.length;f++){g=periods[f];y[u][g]=t.stats[u][i[u][g]]}}for(var v=!1,I=!1,E=!1,l=0;l<browsers.length;l++)for(var u=browsers[l],f=0;f<periods.length;f++){for(var b,g=periods[f],B=document.getElementsByClassName(g)[0].childNodes,w=0;w<B.length;w++)B[w].className.indexOf(u)>-1&&(b=B[w]);void 0!=y[u][g]&&(b.className+=" "+y[u][g]);var D="<span>"+getShortenedBrowserVersion(i[u][g])+'</span><span class="usage">'+p[u][g]+"%</span>";void 0!=i[u][g]?b.innerHTML=D:b.innerHTML="<span></span>",void 0!=y[u][g]&&y[u][g].indexOf("x")>-1&&(v=!0),void 0!=y[u][g]&&y[u][g].indexOf("u")>-1&&(I=!0),void 0!=y[u][g]&&y[u][g].indexOf("d")>-1&&(E=!0)}document.getElementById("legendX").style.display=v?"inline-block":"none",document.getElementById("legendU").style.display=I?"inline-block":"none",document.getElementById("legendD").style.display=E?"inline-block":"none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureDescription").innerHTML="The feature <strong>'"+featureID+"'</strong> was not recognized. ",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var M=document.getElementsByClassName("feature")[0].scrollHeight,T="ciu_embed:"+featureID+":"+M;parent.postMessage(T,"*"),window.onresize=function(e){M=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+featureID+":"+M;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)});